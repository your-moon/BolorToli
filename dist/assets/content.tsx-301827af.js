import{T as v}from"./Serialization-cdc6a098.js";import{g as w,a as _}from"./data-78269d20.js";function x(){var t=document.createElement("div");return t.setAttribute("id","single_word_div"),t}function E(){var t=document.getElementById("img_bolor_toli_extension");return t}function b(){var t=document.createElement("img");return t.setAttribute("src","https://bolor-toli.com/icons/logo.svg"),t.setAttribute("id","img_bolor_toli_extension"),t}function P(){var t=document.createElement("div");t.setAttribute("id","empty_div");const n=document.createTextNode("Олдсонгүй");return t.appendChild(n),t}function C(){var t=document.createElement("div");t.setAttribute("id","error_div");const n=document.createTextNode("Алдаа гарлаа");return t.appendChild(n),t}function h(){let t=document.createElement("div");return t.style.setProperty("flex","50%"),t.style.setProperty("padding","2px"),t.style.setProperty("height","auto"),t.style.setProperty("color","black"),t}function R(){let t=document.createElement("div");return t.setAttribute("id","suggestion_row"),t.style.setProperty("display","flex"),t.style.setProperty("flex-direction","row"),t.style.setProperty("justify-content","space-between"),t}function y(t,n,e,o,r){var i=document.createElement("div");return i.textContent=" ",i.setAttribute("id",t),i.style.setProperty("position","absolute"),i.style.setProperty("height",`${r}px`),i.style.setProperty("width",`${o}px`),i.style.setProperty("top",`${n}px`),i.style.setProperty("left",`${e}px`),i.style.setProperty("overflow","none"),i.style.setProperty("z-index","-100"),document.body.appendChild(i),i}var L=/[.,\s]|'s/g;function a(t){typeof t<"u"&&t!=null&&t.remove()}var B=function(t){var n=t.getBoundingClientRect(),e={m_right:0,m_left:0,top_w:0,bottom_w:0,top:!1,left:!1,bottom:!1,right:!1,any:!1,all:!0};return e.m_right=(window.innerWidth||document.documentElement.clientWidth)-n.right,e.m_left=n.left,e.top_w=n.top,e.bottom_w=(window.innerHeight||document.documentElement.clientHeight)-n.bottom,e.top=n.top<0,e.left=n.left<0,e.bottom=n.bottom>(window.innerHeight||document.documentElement.clientHeight),e.right=n.right>(window.innerWidth||document.documentElement.clientWidth),e.any=e.top||e.left||e.bottom||e.right,e.all=e.top&&e.left&&e.bottom&&e.right,e};const U=window.innerHeight/2;function I(){var t=document.getElementById("extended_pop_up");return t}function N(t,n){var e=document.createElement("div");return e.setAttribute("id","extended_pop_up"),e.style.cssText=`top:${t}px;left:${n}px;min-width:${z}px;min-height:${c}px;`,document.body.appendChild(e),e}function O(t,n,e){var o=B(e);console.log(o),U<t.y&&(e.style.top=n-10-t.height-c-5+"px"),o.top&&(e.style.top=n-10-t.height-c-5+"px"),o.bottom&&(e.style.top=n-10-t.height-c-5+"px"),o.left&&(e.style.left="10px"),o.right&&(e.style.left="",e.style.right="10px")}function $(t,n){var e=document.createElement("div");return e.setAttribute("id","popup"),e.style.cssText=`top:${t+"px"};left:${n+"px"};`,e.addEventListener("mouseover",function(){u(!0)}),e.addEventListener("mouseout",function(){u(!1)}),e}function A(t){let n=p.getBoundingClientRect(),e=m.getBoundingClientRect();var o=(t.bottom-e.top)*100/(n.top-e.top)+10,r=(t.left-e.left)*100/(n.left-e.left);return{top:o,left:r}}function D(t){f?t.remove():document.body.appendChild(t)}function H(){f||(a(I()),a(document.getElementById("popup")),a(E()))}const S=t=>t.left+t.width/2-c/2;async function W(t,n){let e=S(t);const o=N(n,e);O(t,n,o);let r=d.toString().toLowerCase().trim();r=r.replace(L,"");const l=await w(r,"1").then(s=>JSON.parse(s)).catch(s=>console.log(s));k(l,o)}const M=async t=>{if(t.type===v.ERROR)return C();if(t.data.er_cnt===0&&t.data.sr_cnt===0)return P();if(t.data.er_cnt!==0){const n=await _(t),e=document.createElement("div");return e.setAttribute("id","single_word_wrapper"),n.forEach(o=>{const r=x(),i=document.createTextNode(o.word);r.appendChild(i),e.appendChild(r)}),e}if(t.data.sr_cnt!==0){const n=document.createElement("div");return t.data.sr.forEach(o=>{const r=R(),i=h(),l=h(),s=document.createTextNode(o.t.vars[0].w),g=document.createTextNode(o.w.vars[0].w);i.appendChild(s),l.appendChild(g),r.appendChild(i),r.appendChild(l),n.appendChild(r)}),n}return null};async function k(t,n){const e=await M(t);e&&n.appendChild(e),n.addEventListener("mouseover",function(){u(!0)}),n.addEventListener("mouseout",function(){u(!1)})}function T(t){const n=p.getBoundingClientRect(),e=m.getBoundingClientRect();return(t.bottom-e.top)*100/(n.top-e.top)+10}const F=()=>{if(!(d!=null&&d.isCollapsed)){const t=d.getRangeAt(0).getBoundingClientRect(),n=T(t),e=b();e.addEventListener("click",function(){W(t,n)});const o=A(t),r=$(o.top,o.left);r.appendChild(e),D(r)}};function j(){H()}const z=250,c=150;y("cal1",100,100,0,0);y("cal2",0,0,0,0);const d=window.getSelection(),p=document.createRange();p.selectNode(document.getElementById("cal1"));const m=document.createRange();m.selectNode(document.getElementById("cal2"));let f=!1;function u(t){f=t}window.addEventListener("mouseup",()=>{F()});window.addEventListener("mousedown",function(){j()});export{c as POP_UP_FULL_HEIGHT,z as POP_UP_FULL_WIDTH,d as SELECTION_TEXT,f as isMouseOver,p as measureLeftRange,m as measureRightRange,u as setMouseOver};
