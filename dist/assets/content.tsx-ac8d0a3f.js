function S(){var e=document.createElement("div");return e.setAttribute("id","single_word_div"),e}function B(){var e=document.getElementById("img_bolor_toli_extension");return e}function I(){var e=document.createElement("img");return e.setAttribute("src","https://bolor-toli.com/icons/logo.svg"),e.setAttribute("id","img_bolor_toli_extension"),e}function N(){var e=document.createElement("div");e.setAttribute("id","empty_div");const n=document.createTextNode("Олдсонгүй");return e.appendChild(n),e}function H(){var e=document.createElement("div");e.setAttribute("id","error_div");const n=document.createTextNode("Алдаа гарлаа");return e.appendChild(n),e}function x(){let e=document.createElement("div");return e.style.cssText="flex: 50%;padding: 2px;height: auto;color:black;",e}function O(){let e=document.createElement("div");return e.style.cssText="display: flex;flex-direction: row;justify-content: space-between;",e}function E(e,n,t,o,i){var r=document.createElement("div");return r.textContent=" ",r.setAttribute("id",e),r.style.cssText=`position:absolute;height:${i}px;width:${o}px;top:${n}px;left:${t}px;overflow:none;z-index:-100;`,document.body.appendChild(r),r}var U=/[.,\s]|'s/g;function f(e){typeof e<"u"&&e!=null&&e.remove()}var T=function(e){var n=e.getBoundingClientRect(),t={m_right:0,m_left:0,top_w:0,bottom_w:0,top:!1,left:!1,bottom:!1,right:!1,any:!1,all:!0};return t.m_right=(window.innerWidth||document.documentElement.clientWidth)-n.right,t.m_left=n.left,t.top_w=n.top,t.bottom_w=(window.innerHeight||document.documentElement.clientHeight)-n.bottom,t.top=n.top<0,t.left=n.left<0,t.bottom=n.bottom>(window.innerHeight||document.documentElement.clientHeight),t.right=n.right>(window.innerWidth||document.documentElement.clientWidth),t.any=t.top||t.left||t.bottom||t.right,t.all=t.top&&t.left&&t.bottom&&t.right,t};const $=window.innerHeight/2;function D(){var e=document.getElementById("extended_pop_up");return e}function M(e,n,t,o){var i=document.createElement("div");return i.setAttribute("id","extended_pop_up"),i.style.cssText=`position:absolute;display:block;top:${e}px;left:${n}px;width:${t}px;height:${o}px;background: white; border-radius: 10px; border: 1px solid grey;overflow: auto;z-index:10000`,document.body.appendChild(i),i}function k(e,n,t){var o=T(t);console.log(o),$<e.y&&(t.style.top=n-10-e.height-s-5+"px"),o.top&&(t.style.top=n-10-e.height-s-5+"px"),o.bottom&&(t.style.top=n-10-e.height-s-5+"px"),o.left&&(t.style.left="10px"),o.right&&(t.style.left="",t.style.right="10px")}function W(e,n){var t=document.createElement("div");return t.setAttribute("id","popup"),t.style.cssText=`top:${e+"px"};left:${n+"px"};`,t.addEventListener("mouseover",function(){b(!0)}),t.addEventListener("mouseout",function(){b(!1)}),t}function V(e){let n=g.getBoundingClientRect(),t=h.getBoundingClientRect();var o=(e.bottom-t.top)*100/(n.top-t.top)+10,i=(e.left-t.left)*100/(n.left-t.left);return{top:o,left:i}}function j(e){u?e.remove():document.body.appendChild(e)}function z(){u||(f(D()),f(document.getElementById("popup")),f(B()))}const F=async function(e){const n=new TextEncoder().encode(e),t=await window.crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(t)).map(r=>r.toString(16).padStart(2,"0")).join("")},J=function(e){let n=50;for(let t=0;t<e.length;t++)n+=e.codePointAt(t)+1;return n.toString()},G=async function(e){const n=J(e);return F(n).then(t=>t)};async function X(e){var n="";await G(e).then(o=>n=o),console.log(n);const t=await chrome.runtime.sendMessage({hash:n,word:e});return JSON.stringify(t)}const Y=250,s=150;E("cal1",100,100,0,0);E("cal2",0,0,0,0);const m=window.getSelection(),g=document.createRange();g.selectNode(document.getElementById("cal1"));const h=document.createRange();h.selectNode(document.getElementById("cal2"));let u=!1;function b(e){u=e}function q(e){const n=g.getBoundingClientRect(),t=h.getBoundingClientRect(),o=(e.bottom-t.top)*100/(n.top-t.top)+10,i=(e.left-t.left)*100/(n.left-t.left);return{selectionAreaTopPosition:o,selectionAreaLeftPosition:i}}function K(){if(!m.isCollapsed){const e=m.getRangeAt(0).getBoundingClientRect();console.log(e);const{selectionAreaTopPosition:n,selectionAreaLeftPosition:t}=q(e);console.log(n,t);const o=I();o.addEventListener("click",function(){Q(e,n)});const i=V(e),r=W(i.top,i.left);r.appendChild(o),j(r)}}async function Q(e,n){let t=e.left+e.width/2-s/2;var o=M(n,t,Y,s);document.body.appendChild(o),k(e,n,o);var i=m.toString().toLowerCase().trim();i=i.replace(U,"");var r=X(i).then(l=>JSON.parse(l)).catch(l=>console.log(l)),d=await r;if(console.log(d),d.type=="error"){var C=H();o.appendChild(C)}else if(d.data.er_cnt==0&&d.data.sr_cnt==0){var L=N();o.appendChild(L)}else if(d.data.er_cnt!=0)for(var v=d.data.er,a=0;a<v.length;a++){var P=v[a].w.vars[0].w,w=S();const l=document.createTextNode(P);w.appendChild(l),o.appendChild(w)}else{var c=d.data.sr;console.log("suggestions");for(var a=0;a<c.length;a++){var p=O(),y=x(),_=x();const A=document.createTextNode(c[a].t.vars[0].w),R=document.createTextNode(c[a].w.vars[0].w);y.appendChild(A),_.appendChild(R),p.appendChild(y),p.appendChild(_),o.appendChild(p),console.log(c[a].t.vars[0].w),console.log(c[a].w.vars[0].w)}}o.addEventListener("mouseover",function(){u=!0}),o.addEventListener("mouseout",function(){u=!1})}function Z(){z()}window.addEventListener("mouseup",()=>{K()});window.addEventListener("mousedown",function(){Z()});export{s as POP_UP_FULL_HEIGHT,Y as POP_UP_FULL_WIDTH,u as isMouseOver,g as measureLeftRange,h as measureRightRange,b as setMouseOver};
