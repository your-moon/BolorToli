import{g as N}from"./data-285f3d0f.js";function B(){var e=document.createElement("div");return e.setAttribute("id","single_word_div"),e}function O(){var e=document.getElementById("img_bolor_toli_extension");return e}function U(){var e=document.createElement("img");return e.setAttribute("src","https://bolor-toli.com/icons/logo.svg"),e.setAttribute("id","img_bolor_toli_extension"),e}function $(){var e=document.createElement("div");e.setAttribute("id","empty_div");const n=document.createTextNode("Олдсонгүй");return e.appendChild(n),e}function D(){var e=document.createElement("div");e.setAttribute("id","error_div");const n=document.createTextNode("Алдаа гарлаа");return e.appendChild(n),e}function y(){let e=document.createElement("div");return e.style.cssText="flex: 50%;padding: 2px;height: auto;color:black;",e}function T(){let e=document.createElement("div");return e.style.cssText="display: flex;flex-direction: row;justify-content: space-between;",e}function E(e,n,t,o,i){var r=document.createElement("div");return r.textContent=" ",r.setAttribute("id",e),r.style.cssText=`position:absolute;height:${i}px;width:${o}px;top:${n}px;left:${t}px;overflow:none;z-index:-100;`,document.body.appendChild(r),r}var H=/[.,\s]|'s/g;function m(e){typeof e<"u"&&e!=null&&e.remove()}var S=function(e){var n=e.getBoundingClientRect(),t={m_right:0,m_left:0,top_w:0,bottom_w:0,top:!1,left:!1,bottom:!1,right:!1,any:!1,all:!0};return t.m_right=(window.innerWidth||document.documentElement.clientWidth)-n.right,t.m_left=n.left,t.top_w=n.top,t.bottom_w=(window.innerHeight||document.documentElement.clientHeight)-n.bottom,t.top=n.top<0,t.left=n.left<0,t.bottom=n.bottom>(window.innerHeight||document.documentElement.clientHeight),t.right=n.right>(window.innerWidth||document.documentElement.clientWidth),t.any=t.top||t.left||t.bottom||t.right,t.all=t.top&&t.left&&t.bottom&&t.right,t};const k=window.innerHeight/2;function A(){var e=document.getElementById("extended_pop_up");return e}function M(e,n,t,o){var i=document.createElement("div");return i.setAttribute("id","extended_pop_up"),i.style.cssText=`position:absolute;display:block;top:${e}px;left:${n}px;width:${t}px;height:${o}px;background: white; border-radius: 10px; border: 1px solid grey;overflow: auto;z-index:10000`,document.body.appendChild(i),i}function W(e,n,t){var o=S(t);console.log(o),k<e.y&&(t.style.top=n-10-e.height-u-5+"px"),o.top&&(t.style.top=n-10-e.height-u-5+"px"),o.bottom&&(t.style.top=n-10-e.height-u-5+"px"),o.left&&(t.style.left="10px"),o.right&&(t.style.left="",t.style.right="10px")}function z(e,n){var t=document.createElement("div");return t.setAttribute("id","popup"),t.style.cssText=`top:${e+"px"};left:${n+"px"};`,t.addEventListener("mouseover",function(){b(!0)}),t.addEventListener("mouseout",function(){b(!1)}),t}function F(e){let n=g.getBoundingClientRect(),t=v.getBoundingClientRect();var o=(e.bottom-t.top)*100/(n.top-t.top)+10,i=(e.left-t.left)*100/(n.left-t.left);return{top:o,left:i}}function V(e){s?e.remove():document.body.appendChild(e)}function j(){s||(m(A()),m(document.getElementById("popup")),m(O()))}const G=250,u=150;E("cal1",100,100,0,0);E("cal2",0,0,0,0);const f=window.getSelection(),g=document.createRange();g.selectNode(document.getElementById("cal1"));const v=document.createRange();v.selectNode(document.getElementById("cal2"));let s=!1;function b(e){s=e}function J(e){const n=g.getBoundingClientRect(),t=v.getBoundingClientRect(),o=(e.bottom-t.top)*100/(n.top-t.top)+10,i=(e.left-t.left)*100/(n.left-t.left);return{selectionAreaTopPosition:o,selectionAreaLeftPosition:i}}function X(){if(!f.isCollapsed){const e=f.getRangeAt(0).getBoundingClientRect();console.log(e);const{selectionAreaTopPosition:n,selectionAreaLeftPosition:t}=J(e);console.log(n,t);const o=U();o.addEventListener("click",function(){Y(e,n)});const i=F(e),r=z(i.top,i.left);r.appendChild(o),V(r)}}async function Y(e,n){let t=e.left+e.width/2-u/2;var o=M(n,t,G,u);document.body.appendChild(o),W(e,n,o);var i=f.toString().toLowerCase().trim();i=i.replace(H,"");var r=N(i,"1").then(a=>JSON.parse(a)).catch(a=>console.log(a)),c=await r;if(console.log(c),c.type=="error"){var C=D();o.appendChild(C)}else if(c.data.er_cnt==0&&c.data.sr_cnt==0){var L=$();o.appendChild(L)}else if(c.data.er_cnt!=0)for(var h=c.data.er,d=0;d<h.length;d++){var P=h[d].w.vars[0].w,w=B();const a=document.createTextNode(P);w.appendChild(a),o.appendChild(w)}else{var l=c.data.sr;console.log("suggestions");for(var d=0;d<l.length;d++){var p=T(),_=y(),x=y();const R=document.createTextNode(l[d].t.vars[0].w),I=document.createTextNode(l[d].w.vars[0].w);_.appendChild(R),x.appendChild(I),p.appendChild(_),p.appendChild(x),o.appendChild(p),console.log(l[d].t.vars[0].w),console.log(l[d].w.vars[0].w)}}o.addEventListener("mouseover",function(){s=!0}),o.addEventListener("mouseout",function(){s=!1})}function q(){j()}window.addEventListener("mouseup",()=>{X()});window.addEventListener("mousedown",function(){q()});export{u as POP_UP_FULL_HEIGHT,G as POP_UP_FULL_WIDTH,s as isMouseOver,g as measureLeftRange,v as measureRightRange,b as setMouseOver};
