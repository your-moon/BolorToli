async function n(t,e){console.log("fetch request",e);const r=new URLSearchParams({word:e.word,direction:e.direction}),a=new Headers({"API-Key":e.hash});console.log(`https://bolor-toli.com/pub/${t}?${r.toString()}`);const o=await fetch(`https://bolor-toli.com/pub/${t}?${r.toString()}`,{method:"GET",headers:a});if(!o.ok)throw new Error(`Failed to fetch ${t}`);return t==="translate"?o.json():o.text()}function c(t,e){return t.type==="search-suggest"||t.type==="translate"?(n(t.type,t).then(r=>{e({type:"ok",data:r})}).catch(r=>{e({type:"error",data:"",message:r.toString()})}),!0):(e({type:"error",data:"",message:"Invalid request"}),!1)}chrome.runtime.onMessage.addListener((t,e,r)=>c(t,r));
